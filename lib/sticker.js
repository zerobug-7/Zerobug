const _0xfb9e5a=_0x5177;(function(_0x1f8d91,_0xe2c417){const _0x1173da=_0x5177,_0x1a34e6=_0x1f8d91();while(!![]){try{const _0x21aa17=parseInt(_0x1173da(0x11a))/0x1*(parseInt(_0x1173da(0x10e))/0x2)+-parseInt(_0x1173da(0xf5))/0x3*(parseInt(_0x1173da(0x10f))/0x4)+-parseInt(_0x1173da(0xeb))/0x5+parseInt(_0x1173da(0x112))/0x6+-parseInt(_0x1173da(0x113))/0x7+parseInt(_0x1173da(0x10a))/0x8*(-parseInt(_0x1173da(0xfd))/0x9)+-parseInt(_0x1173da(0xe1))/0xa;if(_0x21aa17===_0xe2c417)break;else _0x1a34e6['push'](_0x1a34e6['shift']());}catch(_0x1547c7){_0x1a34e6['push'](_0x1a34e6['shift']());}}}(_0x32da,0x47977));const fs=require('fs'),path=require('path'),crypto=require(_0xfb9e5a(0xec)),{spawn}=require('child_process'),{fileTypeFromBuffer}=require('file-type'),webp=require(_0xfb9e5a(0x105)),fetch=require(_0xfb9e5a(0x10d)),ffmpeg=require('fluent-ffmpeg'),{exec}=require('child_process'),{promisify}=require(_0xfb9e5a(0xea)),execAsync=promisify(exec),{writeExifImg}=require(_0xfb9e5a(0xfe)),tmp=path[_0xfb9e5a(0x109)](__dirname,'../tmp');function sticker2(_0xf1746,_0x546ee8){return new Promise(async(_0x56ce02,_0x72adda)=>{const _0x44cde7=_0x5177;try{if(_0x546ee8){let _0x570ead=await fetch(_0x546ee8);if(_0x570ead[_0x44cde7(0xe8)]!==0xc8)throw await _0x570ead[_0x44cde7(0x10b)]();_0xf1746=await _0x570ead[_0x44cde7(0xfa)]();}let _0x28ef2e=path['join'](tmp,+new Date()+_0x44cde7(0xdf));await fs[_0x44cde7(0x108)][_0x44cde7(0x10c)](_0x28ef2e,_0xf1746);let _0xb243ed=spawn(_0x44cde7(0xf0),['-y','-i',_0x28ef2e,_0x44cde7(0x101),_0x44cde7(0xed),'-f',_0x44cde7(0xf8),'-']);_0xb243ed['on'](_0x44cde7(0xdc),_0x72adda),_0xb243ed['on'](_0x44cde7(0xdd),async()=>{const _0x23d455=_0x44cde7;await fs[_0x23d455(0x108)][_0x23d455(0x107)](_0x28ef2e);});let _0x37a456=[];const [_0x2e35c1,..._0x549eed]=[...module[_0x44cde7(0xe5)][_0x44cde7(0xe6)]['gm']?['gm']:module[_0x44cde7(0xe5)][_0x44cde7(0xee)]?[_0x44cde7(0xee)]:[],_0x44cde7(0x115),_0x44cde7(0xe0),_0x44cde7(0xf7)];let _0x29862c=spawn(_0x2e35c1,_0x549eed);_0x29862c['on']('error',_0xe4ed48=>conn[_0x44cde7(0x11b)](m[_0x44cde7(0xf9)],util[_0x44cde7(0x103)](_0xe4ed48),m)),_0x29862c[_0x44cde7(0x118)]['on'](_0x44cde7(0x110),_0x3e950e=>_0x37a456[_0x44cde7(0xe3)](_0x3e950e)),_0xb243ed[_0x44cde7(0x118)]['pipe'](_0x29862c[_0x44cde7(0x117)]),_0x29862c['on'](_0x44cde7(0xe7),()=>{_0x56ce02(Buffer['concat'](_0x37a456));});}catch(_0x555c5e){_0x72adda(_0x555c5e);}});}function _0x5177(_0x1c15ac,_0x44981a){const _0x32dafd=_0x32da();return _0x5177=function(_0x51775e,_0x2f816e){_0x51775e=_0x51775e-0xd9;let _0x2483a0=_0x32dafd[_0x51775e];return _0x2483a0;},_0x5177(_0x1c15ac,_0x44981a);}async function sticker3(_0x2b9ff6,_0x27d798,_0x35d71f,_0x5b1087){const _0x564984=_0xfb9e5a;_0x27d798=_0x27d798?_0x27d798:await uploadFile(_0x2b9ff6);let _0xf0d0f=await fetch(_0x564984(0x111)+new URLSearchParams(Object[_0x564984(0xde)]({'url':_0x27d798,'packname':_0x35d71f,'author':_0x5b1087})));return await _0xf0d0f[_0x564984(0xfa)]();}async function sticker4(_0x1ab0ac,_0x5bd835){const _0x31d001=_0xfb9e5a;if(_0x5bd835){let _0x268ceb=await fetch(_0x5bd835);if(_0x268ceb['status']!==0xc8)throw await _0x268ceb[_0x31d001(0x10b)]();_0x1ab0ac=await _0x268ceb[_0x31d001(0xfa)]();}return await ffmpeg(_0x1ab0ac,[_0x31d001(0x101),_0x31d001(0xed)],'jpeg',_0x31d001(0xef));}async function sticker5(_0x5b215a,_0x450e32,_0x5aefa3,_0x24f293,_0x44d139=[''],_0x281284={}){const _0x303553=_0xfb9e5a,{Sticker:_0x3b7513}=await import('wa-sticker-formatter'),_0x458164={'type':_0x303553(0xf4),'pack':_0x5aefa3,'author':_0x24f293,'categories':_0x44d139,..._0x281284};return new _0x3b7513(_0x5b215a?_0x5b215a:_0x450e32,_0x458164)['toBuffer']();}function sticker6(_0xdfe512,_0x5aaaa6){return new Promise(async(_0x3161bd,_0x22af19)=>{const _0x1d638a=_0x5177;if(_0x5aaaa6){let _0x3abcbc=await fetch(_0x5aaaa6);if(_0x3abcbc[_0x1d638a(0xe8)]!==0xc8)throw await _0x3abcbc[_0x1d638a(0x10b)]();_0xdfe512=await _0x3abcbc[_0x1d638a(0xfa)]();}const _0x5bf490=await fileTypeFromBuffer(_0xdfe512)||{'mime':_0x1d638a(0x100),'ext':_0x1d638a(0xe2)};if(_0x5bf490[_0x1d638a(0xff)]==_0x1d638a(0xe2))_0x22af19(_0xdfe512);const _0x2fe883=path[_0x1d638a(0x109)](__dirname,'../tmp/'+ +new Date()+'.'+_0x5bf490[_0x1d638a(0xff)]),_0x5ab517=path[_0x1d638a(0x109)](_0x2fe883+'.webp');await fs['promises'][_0x1d638a(0x10c)](_0x2fe883,_0xdfe512);let _0x56b65b=/video/i['test'](_0x5bf490['mime'])?fluent_ffmpeg(_0x2fe883)[_0x1d638a(0xd9)](_0x5bf490['ext']):fluent_ffmpeg(_0x2fe883)[_0x1d638a(0xfb)](_0x2fe883);_0x56b65b['on'](_0x1d638a(0xdc),function(_0x1976ee){const _0x2f7c8f=_0x1d638a;console[_0x2f7c8f(0xdc)](_0x1976ee),fs[_0x2f7c8f(0x108)][_0x2f7c8f(0x107)](_0x2fe883),_0x22af19(_0xdfe512);})['on']('end',async function(){const _0xa6a2da=_0x1d638a;fs[_0xa6a2da(0x108)][_0xa6a2da(0x107)](_0x2fe883),_0x3161bd(await fs[_0xa6a2da(0x108)][_0xa6a2da(0xf1)](_0x5ab517));})[_0x1d638a(0x106)]([_0x1d638a(0x102),_0x1d638a(0x116),_0x1d638a(0x101),_0x1d638a(0x114)])[_0x1d638a(0xe9)](_0x1d638a(0xef))['save'](_0x5ab517);});}async function addExif(_0x1e8af5,_0x545aa6,_0xa01719,_0x46bfe4=[''],_0x538450={}){const _0x19a8cf=_0xfb9e5a,_0x4f9a9=new webp[(_0x19a8cf(0x119))](),_0x18a0eb=crypto[_0x19a8cf(0xfc)](0x20)[_0x19a8cf(0xdb)](_0x19a8cf(0xf2)),_0x53dc22={'sticker-pack-id':_0x18a0eb,'sticker-pack-name':_0x545aa6,'sticker-pack-publisher':_0xa01719,'emojis':_0x46bfe4,..._0x538450};let _0x465d00=Buffer[_0x19a8cf(0x104)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x23dab7=Buffer[_0x19a8cf(0x104)](JSON['stringify'](_0x53dc22),'utf8'),_0x34374f=Buffer[_0x19a8cf(0xf6)]([_0x465d00,_0x23dab7]);return _0x34374f['writeUIntLE'](_0x23dab7['length'],0xe,0x4),await _0x4f9a9[_0x19a8cf(0xf3)](_0x1e8af5),_0x4f9a9[_0x19a8cf(0xe4)]=_0x34374f,await _0x4f9a9['save'](null);}async function sticker(_0x4fb4fd,_0x326473,_0x5c394a,_0xb7b8a0){const _0x8dabb2=_0xfb9e5a;try{const _0x4e0e93=await fetch(_0x326473),_0x285f17=await _0x4e0e93[_0x8dabb2(0xfa)](),_0x52d773=await writeExifImg(_0x285f17,{'packname':_0x5c394a||'WhatsApp\x20Bot','author':_0xb7b8a0||'@bot'});return _0x52d773;}catch(_0x243bed){return console[_0x8dabb2(0xdc)](_0x8dabb2(0xda),_0x243bed),null;}}const support={'ffmpeg':!![],'ffprobe':!![],'ffmpegWebp':!![],'convert':!![],'magick':![],'gm':![],'find':![]};module[_0xfb9e5a(0xe5)]={'sticker':sticker,'sticker2':sticker2,'sticker3':sticker3,'sticker4':sticker4,'sticker6':sticker6,'addExif':addExif,'support':support};function _0x32da(){const _0xbdfa53=['reply','inputFormat','Error\x20in\x20sticker\x20creation:','toString','error','close','entries','.jpeg','png:-','689500IcFYoT','bin','push','exif','exports','support','exit','status','toFormat','util','373815hhmBNg','crypto','scale=512:512:flags=lanczos:force_original_aspect_ratio=decrease,format=rgba,pad=512:512:(ow-iw)/2:(oh-ih)/2:color=#00000000,setsar=1','magick','webp','ffmpeg','readFile','hex','load','default','3xZcupr','concat','webp:-','png','chat','buffer','input','randomBytes','9pdDYGy','./exif','ext','application/octet-stream','-vf','-vcodec','format','from','node-webpmux','addOutputOptions','unlink','promises','join','965720pIMwbq','text','writeFile','node-fetch','3268IdPvru','357156PVAZoM','data','https://api.xteam.xyz/sticker/wm?','2766348GZkTua','1043504ckHGPc','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','convert','libwebp','stdin','stdout','Image','205jSobIV'];_0x32da=function(){return _0xbdfa53;};return _0x32da();}